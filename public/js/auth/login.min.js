(()=>{const t=document.getElementById("email"),a=document.getElementById("password"),n=document.getElementById("btn-login");[t,a].forEach((t=>t.addEventListener("input",(()=>{t.value&&InputValidation.toggleErrorState(t)})))),a.addEventListener("keypress",(t=>"Enter"===t.key&&n.click())),n.addEventListener("click",(async()=>{if(!InputValidation.validateEmail(t)||!InputValidation.validateInput(a,null,"Please enter your password"))return;const n={email:t.value,password:a.value};try{loadingModal.show();const o=await fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),i=await o.json();if(i.success)window.location.replace("/user/dashboard");else{const n=i.message||"Something went wrong";n.toLowerCase().includes("email")?InputValidation.toggleErrorState(t,n):n.toLowerCase().includes("password")?InputValidation.toggleErrorState(a,n):n.toLowerCase().includes("invalid credentials")?(InputValidation.toggleErrorState(t,n),InputValidation.toggleErrorState(a,n)):toast.showToast(n,toast.types.error)}}catch(t){toast.showToast(t.message,toast.types.error)}finally{loadingModal.hide()}}))})();