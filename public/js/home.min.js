(()=>{const e=document.querySelector("#input-url"),t=document.querySelector("[aria-label='spinner']"),a=document.querySelector("[aria-label='arrow-right']"),n=document.querySelector("#btn-shorten");function o(e,t,a=.3){const n=new IntersectionObserver(((e,a)=>{e.forEach((e=>{e.isIntersecting&&(gsap.to(e.target,t),a.unobserve(e.target))}))}),{threshold:a});e.forEach((e=>n.observe(e)))}e.addEventListener("keypress",(e=>{"Enter"===e.key&&(e.preventDefault(),n.click())})),n.addEventListener("click",(async()=>{const o=e.value;if(o){t.classList.toggle("hidden",!1),a.classList.toggle("hidden",!0),n.disabled=!0;try{const t=await fetch("/url/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:o})}),a=await t.json();if(!a.success)return void toast.showToast(a.message,toast.types.error);e.value="",e.blur(),shareModal.showModal(a.data.shortenUrl)}catch(e){toast.showToast(e.message,toast.types.error)}finally{t.classList.toggle("hidden",!0),a.classList.toggle("hidden",!1),n.disabled=!1}}else toast.showToast("Please enter a valid url",toast.types.error)})),o(document.querySelectorAll(".left-side"),{y:0,opacity:1,duration:.5,stagger:.1,ease:"easeInOut"}),o(document.querySelectorAll(".right-side"),{y:0,opacity:1,duration:.5,ease:"easeInOut"}),o(document.querySelectorAll(".feature-section"),{y:0,opacity:1,duration:.5,ease:"easeInOut"},.2)})();